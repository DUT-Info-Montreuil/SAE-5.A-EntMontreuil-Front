<div class="container">
  <!-- Remplacer 'app-create-training' par votre composant de création de ressource -->
  <app-create-ressource
    [displayCreateRessourceDialog]="displayCreateRessources"
    (ressourceCreated)="onRessourceCreated($event)"
  ></app-create-ressource>
  <div
    class="flex align-item-center border-round p-4 relative"
    style="background-color: rgb(239, 244, 255)"
  >
    <div>
      <h1 class="text-2xl font-semibold">Gestion des Ressources</h1>
      <p class="text-900 -mt-2">Créer, modifier ou supprimer des ressources.</p>
    </div>
    <!-- Ajoutez une image ou une icône appropriée -->
    <div
      class="absolute hidden sm:hidden md:block"
      style="top: -10px; right: 50px"
    >
      <img src="/path/to/your/icon.png" alt="icon" width="180px" />
    </div>
  </div>

  <!-- Section Recherche et Ajout -->
  <div class="shadow-1 border-round mt-7 p-4 pt-2">
    <h1 class="text-lg font-medium">Ressources</h1>

    <div class="flex justify-content-between mt-5 mb-4">
      <div>
        <span class="p-input-icon-left">
          <i class="pi pi-search mb-3"></i>
          <input
            type="text"
            pInputText
            [(ngModel)]="searchQuery"
            (input)="onSearch()"
            placeholder="Rechercher une ressource"
          />
        </span>
      </div>

      <p-button
        icon="pi pi-plus"
        label="Créer une ressource"
        class="custom-button"
        (click)="showCreateRessourceDialog()"
      ></p-button>
    </div>

    <!-- Table des Ressources avec PrimeNG -->
    <p-table
      *ngIf="!isLoading; else tableSkeleton"
      [value]="filteredRessources"
      [paginator]="true"
      [rows]="10"
      [responsiveLayout]="scroll"
      [showCurrentPageReport]="true"
      currentPageReportTemplate="Affichage des entrées {first} à {last} sur {totalRecords} ressources"
      [rowsPerPageOptions]="[5, 10, 20, 50]"
      >>
      <ng-template pTemplate="header">
        <tr>
          <th>ID</th>
          <th>Nom de la ressource</th>
          <th>Couleur</th>
          <th>Actions</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-ressource>
        <tr>
          <td>#{{ ressource.id }}</td>
          <td>{{ ressource.name }}</td>
          <td>
            <span
              class="color-indicator"
              [style.background]="ressource.color"
            ></span>
          </td>
          <td class="flex justify-content-evenly">
            <!-- Boutons Modifier et Supprimer -->
            <!-- Implémentez la logique de modification et de suppression comme dans l'exemple des parcours -->
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="4">Aucune ressource.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>

<!-- Dialogues de Confirmation et Messages Toast -->
<p-confirmDialog
  header="Supprimer"
  icon="pi pi-exclamation-triangle"
></p-confirmDialog>
<p-toast></p-toast>

<ng-template #singleSkeleton>
  <p-skeleton width="30%" height="22px"></p-skeleton>
</ng-template>

<ng-template #tableSkeleton>
  <p-skeleton width="100%" height="600px"></p-skeleton>
</ng-template>
